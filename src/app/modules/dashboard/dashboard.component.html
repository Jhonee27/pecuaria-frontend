<div class="dashboard-container container py-5">
  <!-- Título principal -->
  <div class="text-center mb-5">
    <h1 class="fw-bold text-gradient">
      <i class="bi bi-bar-chart-line me-2"></i> Dashboard de IscoConga
    </h1>
    <p class="text-muted">Resumen general de las operaciones y actividades del sistema</p>
  </div>

  <!-- Loader -->
  <div class="text-center" *ngIf="loading">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status"></div>
    <p class="mt-3 text-secondary">Cargando estadísticas del sistema...</p>
  </div>

  <!-- Estadísticas -->
  <div class="row g-4 fade-in" *ngIf="!loading && !errorMessage">
    <div
      class="col-md-3 col-sm-6"
      *ngFor="let item of [
        { icon: 'bi-people-fill', title: 'Comerciantes', value: stats.totalMerchants, color: 'primary', desc: 'Registrados' },
        { icon: 'bi-cash-coin', title: 'Movimientos', value: stats.totalMovements, color: 'success', desc: 'Hoy registrados' },
        { icon: 'bi-wallet2', title: 'Ingresos Hoy', value: 'S/ ' + (stats.todayIncome | number:'1.2-2'), color: 'info', desc: 'Total del día' },
        { icon: 'bi-calendar2-check', title: 'Ingresos Mes', value: 'S/ ' + (stats.monthlyIncome | number:'1.2-2'), color: 'warning', desc: 'Total mensual' }
      ]"
    >
      <div class="stat-card card border-0 shadow-sm text-white bg-{{ item.color }} position-relative overflow-hidden">
        <div class="card-body p-4">
          <div class="d-flex align-items-center justify-content-between">
            <div>
              <h6 class="text-uppercase text-white-50 mb-1">{{ item.title }}</h6>
              <h2 class="fw-bold mb-0">{{ item.value }}</h2>
              <small class="text-white-50">{{ item.desc }}</small>
            </div>
            <div class="icon-circle p-3 rounded-circle bg-white bg-opacity-25">
              <i class="bi {{ item.icon }} fs-3"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Acciones rápidas -->
  <div class="row mt-5 g-4 fade-in" *ngIf="!loading && !errorMessage">
    <div
      class="col-md-4 col-sm-6"
      *ngFor="let action of [
        { icon: 'bi-person-lines-fill', title: 'Comerciantes', desc: 'Gestiona los comerciantes registrados.', color: 'primary', route: '/merchants' },
        { icon: 'bi-truck', title: 'Movimientos', desc: 'Registra nuevos ingresos o salidas.', color: 'success', route: '/movements' },
      ]"
    >
      <div class="action-card card border-0 shadow-sm text-center h-100 hover-card">
        <div class="card-body">
          <div class="icon-wrapper mb-3 bg-{{ action.color }} bg-opacity-10 text-{{ action.color }}">
            <i class="bi {{ action.icon }} fs-1"></i>
          </div>
          <h5 class="fw-bold mb-2">{{ action.title }}</h5>
          <p class="text-muted small mb-4">{{ action.desc }}</p>
          <a [routerLink]="action.route" class="btn btn-outline-{{ action.color }} px-4">
            Ir <i class="bi bi-arrow-right ms-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Mensaje de error -->
  <div class="alert alert-danger mt-4 text-center" *ngIf="errorMessage">
    <i class="bi bi-exclamation-triangle me-2"></i> {{ errorMessage }}
  </div>
</div>

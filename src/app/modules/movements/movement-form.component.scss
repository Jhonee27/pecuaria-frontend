// Variables de colores
$primary-color: #007bff;
$success-color: #28a745;
$danger-color: #dc3545;
$warning-color: #ffc107;
$light-color: #f8f9fa;
$border-color: #dee2e6;
$text-muted: #6c757d;

// Mixins
@mixin card-shadow {
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

@mixin hover-effect {
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.2);
  }
}

@mixin focus-effect {
  &:focus {
    border-color: $primary-color;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  }
}

// Estilos principales
.container {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  
  h2 {
    font-weight: 800;
    background: linear-gradient(135deg, $success-color, #20c997);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

// Alertas personalizadas
.alert {
  border: none;
  border-radius: 0.75rem;
  font-weight: 500;
  
  &.alert-success {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    color: #155724;
    border-left: 4px solid $success-color;
  }
  
  &.alert-danger {
    background: linear-gradient(135deg, #f8d7da, #f5c6cb);
    color: #721c24;
    border-left: 4px solid $danger-color;
  }
  
  &.alert-warning {
    background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    color: #856404;
    border-left: 4px solid $warning-color;
  }
}

// Card principal del formulario
.card {
  border: none;
  background: linear-gradient(135deg, #ffffff, #f8f9fa);
  
  @include hover-effect;
  
  .form-label {
    font-weight: 600;
    color: $text-muted;
    margin-bottom: 0.5rem;
  }
}

// Buscador de comerciantes
.position-relative {
  .form-control {
    border: 2px solid $border-color;
    border-radius: 0.75rem;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    background: white;
    
    @include focus-effect;
    
    &:hover {
      border-color: #adb5bd;
    }
  }
  
  // Dropdown de resultados
  .position-absolute {
    border: 2px solid $primary-color;
    border-top: none;
    border-radius: 0 0 0.75rem 0.75rem;
    background: white;
    z-index: 1000;
    
    .cursor-pointer {
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      
      &:hover {
        background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        transform: translateX(5px);
      }
      
      &.text-primary {
        background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
        
        &:hover {
          background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
        }
      }
      
      .fw-bold {
        font-size: 0.95rem;
      }
      
      small {
        font-size: 0.8rem;
      }
    }
    
    .text-muted {
      font-style: italic;
      padding: 1rem;
    }
  }
}

// Comerciante seleccionado
.bg-light.rounded {
  background: linear-gradient(135deg, #e3f2fd, #f0f4ff) !important;
  border: 2px solid $primary-color;
  border-left: 4px solid $primary-color;
  
  .btn-outline-danger {
    border: 2px solid $danger-color;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    
    &:hover {
      background-color: $danger-color;
      color: white;
      transform: scale(1.1);
    }
  }
}

// Formulario para nuevo comerciante
.bg-light.border.rounded {
  background: linear-gradient(135deg, #f0f8ff, #e6f3ff) !important;
  border: 2px solid $primary-color !important;
  
  h6 {
    color: $primary-color;
    font-weight: 700;
  }
  
  .form-control {
    border: 1px solid $border-color;
    border-radius: 0.5rem;
    font-size: 0.9rem;
    
    @include focus-effect;
    
    &:hover {
      border-color: #adb5bd;
    }
  }
  
  .btn {
    border-radius: 0.5rem;
    font-weight: 600;
    transition: all 0.3s ease;
    
    &.btn-success {
      background: linear-gradient(135deg, $success-color, #20c997);
      border: none;
      
      &:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
      }
      
      &:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
    }
    
    &.btn-outline-secondary {
      border: 2px solid $text-muted;
      
      &:hover {
        background-color: $text-muted;
        color: white;
        transform: translateY(-2px);
      }
    }
  }
}

// Sección de ítems
.mt-4 {
  h5 {
    color: $primary-color;
    font-weight: 700;
    border-bottom: 3px solid $primary-color;
    padding-bottom: 0.5rem;
  }
}

// Tarjetas de ítems
.card.p-3.mb-3 {
  background: linear-gradient(135deg, #ffffff, #f8f9fa) !important;
  border: 1px solid $border-color;
  transition: all 0.3s ease;
  
  &:hover {
    border-color: $primary-color;
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1rem rgba(0, 123, 255, 0.15);
  }
  
  .form-select, .form-control {
    border: 1px solid $border-color;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    
    @include focus-effect;
    
    &:hover {
      border-color: #adb5bd;
    }
  }
  
  .form-control[readonly] {
    background-color: #f8f9fa;
    font-weight: 600;
    color: $success-color;
  }
  
  .btn-outline-danger {
    border: 2px solid $danger-color;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    
    &:hover {
      background-color: $danger-color;
      color: white;
      transform: scale(1.1);
    }
  }
}

// Botón agregar ítem
.btn-outline-primary.rounded-pill {
  border: 2px solid $primary-color;
  font-weight: 600;
  padding: 0.5rem 1.5rem;
  transition: all 0.3s ease;
  
  &:hover {
    background: linear-gradient(135deg, $primary-color, #0056b3);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
  }
}

// Total
.border-top.pt-3 {
  h4 {
    font-weight: 800;
    background: linear-gradient(135deg, $success-color, #20c997);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

// Botón de envío principal
.btn-success.rounded-pill {
  background: linear-gradient(135deg, $success-color, #20c997);
  border: none;
  font-weight: 700;
  padding: 0.75rem 2rem;
  font-size: 1.1rem;
  transition: all 0.3s ease;
  
  &:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
}

// Historial de ingresos
.mt-5 {
  h4 {
    font-weight: 800;
    background: linear-gradient(135deg, $primary-color, #6610f2);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

// Tabla de movimientos
.table-responsive {
  border-radius: 0.75rem;
  overflow: hidden;
  
  .table {
    margin-bottom: 0;
    
    thead {
      th {
        background: linear-gradient(135deg, $primary-color, #0056b3);
        color: white;
        border: none;
        font-weight: 600;
        padding: 1rem 0.75rem;
        text-transform: uppercase;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
      }
    }
    
    tbody {
      tr {
        transition: all 0.3s ease;
        
        &:hover:not(.bg-light) {
          background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
          transform: translateX(5px);
        }
        
        td {
          padding: 0.75rem;
          vertical-align: middle;
          border-color: $border-color;
        }
        
        // Botón de expandir
        .btn-outline-primary.rounded-circle {
          border: 2px solid $primary-color;
          width: 35px;
          height: 35px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.3s ease;
          
          &:hover {
            background-color: $primary-color;
            color: white;
            transform: scale(1.1);
          }
        }
      }
      
      // Fila expandida
      .bg-light {
        background: linear-gradient(135deg, #f8f9fa, #e9ecef) !important;
        
        td {
          border: none;
          padding: 0;
        }
        
        .table {
          background: transparent;
          
          thead {
            th {
              background: linear-gradient(135deg, #6c757d, #495057);
              font-size: 0.8rem;
              padding: 0.5rem;
            }
          }
          
          tbody {
            tr {
              &:hover {
                background: linear-gradient(135deg, #ffffff, #f8f9fa);
                transform: none;
              }
              
              td {
                font-size: 0.9rem;
                padding: 0.5rem;
              }
            }
          }
        }
      }
      
      // Mensaje sin datos
      .text-muted {
        font-style: italic;
        padding: 2rem !important;
      }
    }
  }
}

// Estados de carga
.spinner-border-sm {
  width: 1rem;
  height: 1rem;
  border-width: 0.15em;
}

// Utilidades adicionales
.cursor-pointer {
  cursor: pointer;
}

.hover-bg-light:hover {
  background-color: #f8f9fa !important;
}

.z-3 {
  z-index: 1000;
}

// Responsive design
@media (max-width: 768px) {
  .container {
    padding: 1rem;
    
    h2 {
      font-size: 1.5rem;
    }
  }
  
  .card {
    padding: 1rem !important;
  }
  
  .row.g-3 {
    margin: 0 -0.5rem;
    
    [class*="col-"] {
      padding: 0 0.5rem;
    }
  }
  
  // Ajustes para formularios en móviles
  .form-control, .form-select {
    font-size: 16px; // Previene zoom en iOS
  }
  
  // Tabla responsive
  .table-responsive {
    font-size: 0.9rem;
    
    .table {
      thead {
        display: none;
      }
      
      tbody, tr, td {
        display: block;
        width: 100%;
      }
      
      tr {
        margin-bottom: 1rem;
        border: 2px solid $border-color;
        border-radius: 0.5rem;
        padding: 1rem;
        
        td {
          text-align: left !important;
          padding: 0.5rem;
          border: none;
          position: relative;
          
          &:before {
            content: attr(data-label);
            font-weight: bold;
            display: inline-block;
            width: 40%;
            color: $primary-color;
          }
        }
      }
    }
  }
  
  // Botones en móviles
  .btn {
    width: 100%;
    margin-bottom: 0.5rem;
  }
  
  .d-flex.gap-2 {
    flex-direction: column;
  }
}

@media (max-width: 576px) {
  .container {
    padding: 0.5rem;
  }
  
  h4, h5, h6 {
    font-size: 1.1rem;
  }
  
  .btn {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
  }
}

// Animaciones
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card, .table-responsive {
  animation: fadeIn 0.5s ease-out;
}

// Scroll personalizado
.position-absolute::-webkit-scrollbar {
  width: 6px;
}

.position-absolute::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

.position-absolute::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 10px;
}

.position-absolute::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}